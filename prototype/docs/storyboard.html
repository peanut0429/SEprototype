<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>原型导出 · 画板/故事板</title>
  <link rel="stylesheet" href="../assets/tokens.css"/>
  <link rel="stylesheet" href="../assets/styles.css"/>
  <style>
    body{padding:16px}
    .grid{display:grid; grid-template-columns: repeat(2, minmax(320px, 1fr)); gap:16px}
    .shot{background:#fff; border:1px solid var(--c-border); border-radius:12px; box-shadow:var(--shadow-1); overflow:hidden}
    .shot-header{display:flex; justify-content:space-between; align-items:center; padding:8px 12px; background:var(--c-bg-soft); border-bottom:1px solid var(--c-border)}
    .shot-title{font-weight:600}
    .shot-body{aspect-ratio:375/667; position:relative}
    .shot-body iframe{width:100%; height:100%; border:0}
    .controls{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px}
    @media print{ .controls{display:none} .grid{grid-template-columns: repeat(2, 1fr)} body{padding:0} }
  </style>
</head>
<body>
  <h1 style="font-size:20px">原型导出 · 画板/故事板</h1>
  <div class="controls">
    <label class="filter-chip"><input type="checkbox" data-shot="onboarding" checked/> 引导</label>
    <label class="filter-chip"><input type="checkbox" data-shot="parent-home" checked/> 家长首页</label>
    <label class="filter-chip"><input type="checkbox" data-shot="child-home" checked/> 学生首页</label>
    <label class="filter-chip"><input type="checkbox" data-shot="generator" checked/> 出题器</label>
    <label class="filter-chip"><input type="checkbox" data-shot="practice" checked/> 练习</label>
    <label class="filter-chip"><input type="checkbox" data-shot="result" checked/> 结果</label>
    <label class="filter-chip"><input type="checkbox" data-shot="mistakes" checked/> 错题本</label>
    <label class="filter-chip"><input type="checkbox" data-shot="print-center"/> 打印</label>
    <label class="filter-chip"><input type="checkbox" data-shot="review-ocr"/> 批改</label>
    <label class="filter-chip"><input type="checkbox" data-shot="reports"/> 报告</label>
    <label class="filter-chip"><input type="checkbox" data-shot="calendar"/> 日历</label>
    <label class="filter-chip"><input type="checkbox" data-shot="settings"/> 设置</label>
    <button class="btn btn-primary" onclick="window.print()">打印为 PDF</button>
  </div>

  <div id="grid" class="grid"></div>

  <script>
    const routes = [
      ['引导','onboarding'],
      ['家长首页','parent-home'],
      ['学生首页','child-home'],
      ['出题器','generator'],
      ['练习','practice'],
      ['结果','result'],
      ['错题本','mistakes'],
      ['打印','print-center'],
      ['批改','review-ocr'],
      ['报告','reports'],
      ['日历','calendar'],
      ['设置','settings'],
    ];
    const grid = document.getElementById('grid');

    function render(){
      const enabled = new Set(Array.from(document.querySelectorAll('[data-shot]')).filter(i=> i.checked).map(i=> i.getAttribute('data-shot')));
      grid.innerHTML = routes.filter(([_,key])=> enabled.has(key)).map(([name,key])=>{
        const src = `../index.html#/${key}`;
        return `<div class="shot"><div class="shot-header"><div class="shot-title">${name}</div><code>#/${key}</code></div><div class="shot-body"><iframe src="${src}"></iframe></div></div>`;
      }).join('');
    }

    document.querySelectorAll('[data-shot]').forEach(i=> i.addEventListener('change', render));
    render();
  </script>
</body>
</html>
